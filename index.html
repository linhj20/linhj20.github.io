<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Uniswap-v2部署工作记录（二）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/" class="article-date">
  <time class="dt-published" datetime="2023-02-06T07:17:06.000Z" itemprop="datePublished">2023-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/">Uniswap-v2部署工作记录（二）</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="这一周的工作总结"><a href="#这一周的工作总结" class="headerlink" title="这一周的工作总结"></a>这一周的工作总结</h2><p>1、跟着truffle入门教程简单过了一遍</p>
<p>2、学习Uniswap官网上关于v2的知识</p>
<p>3、在仍然找不到用truffle搭建Uniswap的教程的情况下，结合truffle入门教程和其他框架搭建Uniswap的教程进行初尝试（目前已经大概摸清楚了ganache和truffle的方法，但可能合约本身有些问题，一直run out of gas）</p>
<hr>
<ul>
<li>truffle入门教程：<a target="_blank" rel="noopener" href="https://learnblockchain.cn/docs/truffle/getting-started/installation.html">https://learnblockchain.cn/docs/truffle/getting-started/installation.html</a> （中文文档<ul>
<li>整体没有什么困难，毕竟是入门教程</li>
<li>小教训：<code>truffle unbox</code> 下载之前不能使用 <code>truffle init</code>，不然会有奇怪的错误</li>
<li><code>truffle develop</code> 似乎能够和 用remix教程中，生成…账户操作等价，如果果真如此，truffle框架使用起来应该会很方便</li>
</ul>
</li>
<li>Uniswap官网：<a target="_blank" rel="noopener" href="https://docs.uniswap.org/">https://docs.uniswap.org/</a><ul>
<li>需要挂梯子（梯子经常出毛病，总感觉电脑设置不太对）</li>
<li>全英文，合理运用电脑分屏，实现看文档+查英语单词+做笔记多管齐下</li>
</ul>
</li>
</ul>
<hr>
<h3 id="truffle搭建Uniswap"><a href="#truffle搭建Uniswap" class="headerlink" title="truffle搭建Uniswap"></a>truffle搭建Uniswap</h3><p>v2-core：<a target="_blank" rel="noopener" href="https://github.com/Uniswap/v2-core">https://github.com/Uniswap/v2-core</a></p>
<p>v2-periphery：<a target="_blank" rel="noopener" href="https://github.com/Uniswap/v2-periphery">https://github.com/Uniswap/v2-periphery</a></p>
<p>一些疑惑：migrations下没有文件，可能需要自己补充？不然core和periphery好像各自干各自的，我好像只是推了一个框架上去编译一下</p>
<h5 id="v2-core"><a href="#v2-core" class="headerlink" title="v2-core"></a>v2-core</h5><ol>
<li><code>truffle init</code> <img src="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/1.png"></li>
<li><code>truffle compile</code></li>
</ol>
<ul>
<li>第一次执行的时候报错如下：<img src="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/2.png"></li>
<li>解决：修改<code>truffle-config.js</code> 中的compilers-&gt;solc-&gt;version为0.5.16</li>
<li>编译通过<img src="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/3.png"></li>
</ul>
<ol start="3">
<li><code>truffle develop</code></li>
<li><code>migrate</code>成功了！ <img src="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/4.png"></li>
</ol>
<h5 id="v2-periphery：同上，如法炮制"><a href="#v2-periphery：同上，如法炮制" class="headerlink" title="v2-periphery：同上，如法炮制"></a>v2-periphery：同上，如法炮制</h5><ul>
<li>truffle compile遇到问题： <img src="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/5.png"><ul>
<li>网上搜了一下，这个文件是同系列的Uniswap下的一个算是公共文件？</li>
<li>想到的解决方法：单独下载下来相关依赖文件再改路径？（很麻烦）还是查一下import导入中@是什么意思</li>
<li>查到了：通过npm的目录导入，是使用@<ul>
<li>附：solidity import的相关知识 <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_52708261/article/details/127064930">https://blog.csdn.net/qq_52708261/article/details/127064930</a></li>
</ul>
</li>
<li>想办法搞一个npm目录导入（谢天谢地，看了很多教程，有类似的操作，这个在Uniswap官网的相关教程有，不过官网的教程是搭建一个能够和Uniswap通信的合约）<code>npm i --save @uniswap</code></li>
<li>解决了！nice！（虽然有warning） <img src="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/6.png"></li>
</ul>
</li>
</ul>
<hr>
<p>我好像大概知道距离真正部署的差距了 </p>
<p>1、部署前的准备，包括账户，测试币，WETH合约地址和infuraKey等等、</p>
<p>2、migrate下的脚本</p>
<p>应该只要找一下别人的migrate下的脚本怎么写，然后生成新账户，获取测试币</p>
<hr>
<p>和学长聊了之后，接下来的思路应该是：</p>
<ol>
<li>用ganache生成账户之类的东西</li>
<li>写一下migrate脚本</li>
</ol>
<p>记得注意一下核心合约和外围合约的关系（比如后者的参数可能要用到前者的地址这种</p>
<hr>
<h5 id="Ganache安装-学习-使用"><a href="#Ganache安装-学习-使用" class="headerlink" title="Ganache安装-学习-使用"></a>Ganache安装-学习-使用</h5><p>参考教程：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43725548/article/details/117651078">(32条消息) Win10如何正确安装Ganache可视化客户端_张康佳的博客-CSDN博客_ganache客户端</a>  安装✔</p>
<hr>
<h5 id="migrations下脚本编写以及迁移"><a href="#migrations下脚本编写以及迁移" class="headerlink" title="migrations下脚本编写以及迁移"></a>migrations下脚本编写以及迁移</h5><p>找到了一个好东西：[<a target="_blank" rel="noopener" href="https://github.com/Uniswap/v2-core/issues/110">Feature] Truffle Migrations + Typechain · Issue #110 · Uniswap&#x2F;v2-core (github.com)</a></p>
<p>在里面找到了v2-core的migration的脚本，copy了一份，稍微修改了以后：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">UniswapV2Factory</span> = artifacts.<span class="built_in">require</span>(<span class="string">&quot;UniswapV2Factory&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">deployer</span>) &#123;</span><br><span class="line">  deployer.<span class="title function_">deploy</span>(<span class="title class_">UniswapV2Factory</span>, <span class="string">&quot;0xd97Bc11283D3C2452C40F2d8E2a22d4cA3391E3E&quot;</span>); </span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>并且仿照它给v2-periphery写了一份脚本，参数是参考了<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/212397361">手把手教你部署自己的uniswap交易所 - 知乎 (zhihu.com)</a> 中的介绍</p>
<p>v2-core部署：<img src="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/7.png"></p>
<p>v2-periphery部署：<img src="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/8.png"></p>
<hr>
<p>这里部署了router01，实际应该部署02</p>
<p>02在编译的时候有警告：<img src="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/9.png"></p>
<p>遇到了问题：<img src="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/10.png"></p>
<p>尝试解决：修改了truffle-config,js的gas值</p>
<p>再次truffle migrate，有：<img src="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/11.png"></p>
<p>ganache重新开了一块gas limit更高的值，再次尝试：<img src="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/12.png"></p>
<hr>
<p>参考：<a target="_blank" rel="noopener" href="https://ethereum.stackexchange.com/questions/94621/uniswap-router-deployment-error-uniswapv2router02-cannot-create-instance-o">solidity - Uniswap Router deployment error: “UniswapV2Router02” – Cannot create instance of UniswapV2Router02; no code at address 0xxxxxxxxx - Ethereum Stack Exchange</a></p>
<p>修改了optimizer之后部署成功了！！（撒花</p>
<p><img src="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/13.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/" data-id="cldshe0750000ngus8rv0fv1g" data-title="Uniswap-v2部署工作记录（二）" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-uniswap官网阅读学习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/02/04/uniswap%E5%AE%98%E7%BD%91%E9%98%85%E8%AF%BB%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2023-02-04T02:03:18.000Z" itemprop="datePublished">2023-02-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/02/04/uniswap%E5%AE%98%E7%BD%91%E9%98%85%E8%AF%BB%E5%AD%A6%E4%B9%A0/">uniswap官网阅读学习</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>uniswap的学习笔记，括号里是一些我自己的奇怪的翻译</p>
<p><a target="_blank" rel="noopener" href="https://docs.uniswap.org/">https://docs.uniswap.org/</a></p>
<p>每一部分的结构大致都是：不懂的英语名词查询+自己认为重要的句子的解读（非常不通顺警告）</p>
<p>这几天的梯子实在是不太好用，天天find config error，呜呜</p>
<h1 id="V2-Protocol"><a href="#V2-Protocol" class="headerlink" title="V2 Protocol"></a>V2 Protocol</h1><h2 id="overview"><a href="#overview" class="headerlink" title="overview"></a>overview</h2><p>sdk：帮助开发者与uniswap-v2协议交互</p>
<h2 id="Concepts：protocol-overview"><a href="#Concepts：protocol-overview" class="headerlink" title="Concepts：protocol overview"></a>Concepts：protocol overview</h2><h3 id="How-Uniswap-works"><a href="#How-Uniswap-works" class="headerlink" title="How Uniswap works"></a>How Uniswap works</h3><p>liquidity：资产流动性</p>
<p>constant product formula：The automated market(自动化市场) making algorithm used by Uniswap. See x*y&#x3D;k.</p>
<p>obiviate:排除</p>
<p>prioritize：优先考虑</p>
<p>decentralization：分散，非集权化</p>
<p>censorship：审查制度</p>
<p>deposit：放下，放置；寄存，存放，储蓄；支付（押金，定金或预缴费用）</p>
<p>equivalent：等同的，等效的</p>
<p>invariant：不变的；不变量</p>
<p>exponentially：以指数方式</p>
<p>divergence：差异，不同</p>
<p>arbitrage：套汇，套利</p>
<hr>
<ul>
<li>Uniswap is an <em><strong>automated liquidity protocol</strong></em> <em><strong>powered</strong> by a <a target="_blank" rel="noopener" href="https://docs.uniswap.org/contracts/v2/concepts/protocol-overview/glossary#constant-product-formula">constant product formula</a></em> and &#x2F;&#x2F; <strong>implemented</strong> in a system of non-upgradeable smart contracts on the <a target="_blank" rel="noopener" href="https://ethereum.org/">Ethereum</a> blockchain. </li>
<li>Uniswap不需要第三方可信任的中介，优先考虑（注重？）非集权化，抵制审查和安全</li>
<li>Each Uniswap smart contract, or pair, manages a liquidity pool （流动池）made up of reserves of two <a target="_blank" rel="noopener" href="https://eips.ethereum.org/EIPS/eip-20">ERC-20</a> tokens.（一对token）</li>
<li>任何人可以成为liquidity provider (LP) 。</li>
<li>LP—-&gt;deposit underlying token—&gt;get pool tokens</li>
<li><strong>？</strong>These tokens track pro-rata LP shares of the total reserves, and can be redeemed for the underlying assets at any time. 根据投资者在池子中的份额 随时调整underlying资产（？？）</li>
<li>pairs（个人理解为池子中的一对token）-市场的调整者</li>
<li><strong>？</strong>x * y &#x3D; k：有一个好的特性，一笔大的交易（与reserves（个人理解为池子中积蓄（？））执行起来，得到的回报(?)以指数形式差于小的交易（这样，这个智能合约不容易被攻击？  原文：Because <code>k</code> remains unchanged from the reference frame of a trade, it is often referred to as the invariant. This formula has the desirable property that larger trades (relative to reserves) execute at exponentially worse rates than smaller ones.</li>
<li>实际上，Uniswap提高百分之零点三的小费，实际上增加了reserve。这部分实现于：当LP燃烧pool token，撤销他们在reserve中的部分（原文：This functions as a payout to LPs, which is realized when they burn their pool tokens to withdraw their portion of total reserves.</li>
</ul>
<hr>
<p>几个疑问：1、Uniswap到底涉及几种货币？</p>
<p>2、这些货币之间是什么关系？什么情况下会改变它们的数量&#x2F;比例&#x2F;”价值“？（交易，deposit，reserve之间的关系？）</p>
<p>3、shares，pool tokens，reserves，token A&#x2F;B是什么关系？</p>
<h3 id="Ecosystem-Participants"><a href="#Ecosystem-Participants" class="headerlink" title="Ecosystem Participants"></a>Ecosystem Participants</h3><p>comprise：包括，包含</p>
<p>incentivize：有奖鼓励；激励</p>
<p>integrate：使合并；加入，融入群体</p>
<p>homogenous：同质的，同类的</p>
<p>provision：提供，供应</p>
<p>interoperability：互用性</p>
<p>Speculator：投机者</p>
<hr>
<ul>
<li>Uniswap生态主要包括三种使用者：liquidity providers, traders, and developers</li>
<li>LP：被鼓励去投资ERC-20代币到common liquidity pools（常规流动池）</li>
<li>trader：交换token（用一种换另外一种）（需要交百分之0.3的小费）（这一部分的小费将流向LP）（根据上一小节，LP在燃烧pool token，撤回股份（？）的时候可以拿到这部分小费）</li>
<li>developer：可以直接加入Uniswap智能合约，开发新的更刺激的交易方式、接口</li>
<li>LP有很多分类：<ul>
<li>消极的：持有token，投资，期待得到的回报是交易小费</li>
<li>专业的：主要专注市场，经常升级小费工具和追踪流动性位置的DeFi工程</li>
<li>Token projects sometimes choose to become LPs to create a liquid marketplace for their token</li>
<li>Finally, some DeFi pioneers are exploring complex liquidity provision interactions like incentivized liquidity, liquidity as collateral, and other experimental strategies. （DeFi工程师选择Uniswap，方便探索）</li>
</ul>
</li>
<li>Trader：无论哪一种，都交一样比例的平台费。每一种对增加流动性和价格准确性（？accuracy）都做了贡献<ul>
<li>投机者，利用Uniswap协议流动swap token（赚差价？</li>
<li>套利机器人（？）：通过比较不同平台的价格寻找利润</li>
<li>DAPP使用者：购买token，花在其他应用上</li>
<li>一些智能合约（Smart contracts that execute trades on the protocol by implementing swap functionality (from products like DEX aggregators to custom Solidity scripts).）</li>
</ul>
</li>
<li>Developers&#x2F;Projects：太多种了<ul>
<li>很多主要的DeFi仪表板项目中可以找到Uniswap功能</li>
<li>钱包</li>
<li>DEX（去中心化交易所）需要提取流动性， Uniswap是其最大的单一去中心化流动来源</li>
<li>…</li>
</ul>
</li>
</ul>
<p><img src="/2023/02/04/uniswap%E5%AE%98%E7%BD%91%E9%98%85%E8%AF%BB%E5%AD%A6%E4%B9%A0/1.png"></p>
<h3 id="Smart-contract"><a href="#Smart-contract" class="headerlink" title="Smart contract"></a>Smart contract</h3><p>singleton：单独的</p>
<p>minimal：极小的，极少的</p>
<p>brutalist：野兽派</p>
<p>rationale：&lt;正式&gt;根本原因，逻辑依据</p>
<p>generic：一般的通用的</p>
<p>oracle：牧师，女祭司；能提供宝贵信息的人（或书）；</p>
<p>constellation：星座；一群相似的人</p>
<p>Notably：明显的，显著的</p>
<p>meta-transaction：元事务（？）</p>
<p>integrations：结合，融合</p>
<p>would-be：想要成为的；自称的；冒充的</p>
<p>takeaway：外卖食品；外卖餐馆，要点</p>
<p>ameliorate：改善，改良</p>
<hr>
<ul>
<li>核心合约：保证所有机构（？party）与Uniswap的交互安全</li>
<li>外围合约：与核心合约交互</li>
<li>Core：包括单独的工厂合约和许多的pairs合约（which the factory is responsible for creating and indexing）<ul>
<li>The simple rationale for this is that contracts with a smaller surface area are easier to reason about, less bug-prone, and more functionally elegant.（大概意思：不易出错，功能性强</li>
<li>对于用户不太友好，不建议直接和核心合约交互</li>
<li>Factory：holds the generic bytecode responsible for powering pairs。<ul>
<li>主要工作：对于每一对特定的token pair，创建一个且仅有一个智能合约</li>
</ul>
</li>
<li>Pairs<ul>
<li>serving as automated market makers（调节市场</li>
<li>keeping track of pool token balances（追踪pool token的平衡</li>
<li>expose data which can be used to build decentralized price oracles.</li>
</ul>
</li>
</ul>
</li>
<li>Periphery：a constellation of smart contracts designed to <strong>support domain-specific interactions with the core</strong> 由于Uniswap无准入标准的生态，下面描述的合约并没有特却。但它们是一个如何安全高效地与Uniswap交互的范例<ul>
<li>Library：为抓取数据&#x2F;价格提供丰富方便的功能</li>
<li>Router：（用了Library）支持提供交易和流动性操作功能的前端基础需求；天然地支持multi-pair trades（e.g. x to y to z)；treats ETH as a first-class citizen；</li>
</ul>
</li>
<li>Design Decision<ul>
<li>Sending Tokens：… but the takeaway is that <strong>tokens must be transferred to the pair before calling any token-requiring method</strong> (the one exception to this rule is <a target="_blank" rel="noopener" href="https://docs.uniswap.org/contracts/v2/concepts/core-concepts/flash-swaps">Flash Swaps</a>.</li>
<li>WETH：不直接支持ETH，so ETH⇄ERC-20 pairs must be emulated with WETH</li>
<li>Minimum Liquidity</li>
</ul>
</li>
</ul>
<h3 id="Glossary"><a href="#Glossary" class="headerlink" title="Glossary"></a>Glossary</h3><p>fungible：代替的，可取代的</p>
<p>ratio：比例，比率</p>
<p>slippage：滑移，滑动，下降</p>
<hr>
<ul>
<li><strong>An automated market maker</strong>：a smart contract on Ethereum that <strong>holds on-chain liquidity reserves</strong>. Users can trade against these reserves at prices set by an automated market making formula.</li>
<li><strong>Factory</strong>：A smart contract that deploys a unique smart contract（pair） <strong>for any ERC20&#x2F;ERC20 trading pair</strong>.</li>
<li><strong>Pair</strong>：A smart contract deployed from the Uniswap V2 Factory that <strong>enables trading between two ERC20 tokens.</strong></li>
<li><strong>Pool</strong>：Liquidity within a pair is pooled across all liquidity providers.</li>
<li><strong>Mid price</strong>：The price between &#x2F;&#x2F; what users can buy and sell tokens at a given moment. In Uniswap this is the <strong>ratio of the two ERC20 token reserves</strong>.</li>
<li><strong>Price impact</strong>：交易的价格与MId price的差异</li>
<li><strong>Slippage</strong>：The amount the price moves in a trading pair between when a transaction is submitted and when it is executed.（提交和真正执行的时候的价格差异）</li>
<li><strong>Flash swap</strong>：A trade that uses the tokens being purchased before paying for them. （刚买就卖</li>
</ul>
<h2 id="Concepts：Core-Concepts"><a href="#Concepts：Core-Concepts" class="headerlink" title="Concepts：Core Concepts"></a>Concepts：Core Concepts</h2><h3 id="Swaps"><a href="#Swaps" class="headerlink" title="Swaps"></a>Swaps</h3><p> intuitive：直觉的，易懂的</p>
<p>underpin：支持，巩固，构成…的基础</p>
<p>proportional：成比例的；相称的，协调的</p>
<p>Anatomy：解剖学</p>
<p>aptly：恰当地，贴切地</p>
<p>correspond to：相当于</p>
<p>vulnerable：脆弱的，易受伤的</p>
<p>arbitrage：套利，套汇，仲裁</p>
<hr>
<ul>
<li><p>Introduction</p>
<ul>
<li><p>For end-users：输入一种代币，协议计算出应该输出多少另一种代币（直觉易懂的）</p>
</li>
<li><p>在本章指引中，我们将观察在协议层面，在一次交换中发生的事情，以便更好地理解Uniswap如何工作</p>
</li>
<li><p>uniswap中的swap与传统平台上的trade的区别：Uniswap的比率（一种代币&#x2F;另一种代币）是由协议自动控制的，且实时反馈</p>
</li>
<li><p>Liquidity pools are smart contracts that <strong>hold balances of two unique tokens</strong> and enforces rules around depositing and withdrawing them.</p>
<p>This rule is the <a target="_blank" rel="noopener" href="https://docs.uniswap.org/contracts/v2/concepts/protocol-overview/glossary#constant-product-formula">constant product formula</a>. <strong>When either token is withdrawn (purchased), a proportional amount of the other must be deposited (sold), in order to maintain the constant.</strong></p>
</li>
</ul>
</li>
<li><p>Anatomy of a swap：从最基础的层次来看，Uniswap v2的swap都发生在一个简单的，名称就叫做swap的函数中。</p>
<ul>
<li><code>function swap(uint amount0Out, uint amount1Out, address to, bytes calldata data);</code></li>
</ul>
</li>
<li><p>Receiving tokens</p>
<ul>
<li>As is probably clear from the function signature（明确函数特征（？））, Uniswap requires <code>swap</code> callers to <em><strong>specify how many output tokens</strong> they would like to receive</em> &#x2F;&#x2F;<strong>via the <code>amount&#123;0,1&#125;Out</code> parameters</strong>, which correspond to the desired amount of <code>token&#123;0,1&#125;</code>.</li>
</ul>
</li>
<li><p>Sending Tokens</p>
<ul>
<li>What’s not as clear is （不太清楚的）how Uniswap <em>receives</em> tokens as payment for the swap</li>
<li>传统的：需要调用者首次准许token contract，then call a function that in turn calls transferFrom on the token contract</li>
<li>Uniswap：pairs check their token balances at the <em>end</em> of every interaction.（token balance（比率）到交互的最后才确定）（所以才有Slippage？）</li>
<li>Then, at the beginning of the <em>next</em> interaction, current balances <strong>are differenced against</strong> the <strong>stored</strong> values to determine the amount of tokens that were sent by <strong>the current interactor</strong>. （有滞后）</li>
<li>The takeaway is that <strong>tokens must be transferred to pairs before swap is called</strong> (the one exception to this rule is <a target="_blank" rel="noopener" href="https://docs.uniswap.org/contracts/v2/concepts/core-concepts/flash-swaps">Flash Swaps</a>). token在swap函数调用之前应该传给pair合约</li>
<li>This means that to safely use the <code>swap</code> function, it must be called from <em>another smart contract</em>. 喂了保证安全试用swap函数，它一定要被其他智能合约调用（把token传给pair的合约？）</li>
<li>The alternative (transferring tokens to the pair and then calling <code>swap</code>) is not safe to do non-atomically because the sent tokens would be vulnerable to arbitrage.</li>
</ul>
</li>
</ul>
<h3 id="Pools"><a href="#Pools" class="headerlink" title="Pools"></a>Pools</h3><p>venue：（事件的）发生地点，场所</p>
<p> facilitate：促进，推动</p>
<p>incentivize：有奖鼓励，激励</p>
<p>proportional：成比例的，相称的，协调的</p>
<p>mint：薄荷，薄荷糖；铸造，创造</p>
<p>liquidity：资产流动性，资产变现能力；流动资产，现金；液体，液态；（市场）活跃；偿债能力</p>
<p>pro-rata：成比例的，按比例的</p>
<p>completion：完成，结束</p>
<p>retrieve：找回，检索，挽救，挽回</p>
<p>accrued：应计的，增值的，权责已发生的</p>
<p>tradable：可贸易的，可买卖的</p>
<p>discrete：分离的，个别的</p>
<p>reiterate：重申，反复说</p>
<hr>
<ul>
<li>Introduction<ul>
<li>Each Uniswap <strong>liquidity pool</strong> is a <strong>trading venue for <em>a pair of ERC20 tokens</em></strong> 流动池：一对代币的交易场所</li>
<li>pool contract刚创建时，its balances of each token are 0</li>
<li>This first liquidity provider is the one who sets the initial price of the pool. 第一个LP能够设置pool的初始价格（price）</li>
<li>LP被鼓励放置（价值）相当的token进入池子。原因：如果初始的LP放置的比率与当时的市场比率不同，中间就有差价可赚（原句：This immediately creates a profitable arbitrage opportunity, which is likely to be taken by an external party.</li>
<li>当另一个LP要给已经存在的pool放置token，必须（一般）放置符合当前市场价比率的token对。如果不的话，一样面对能被套利的风险。</li>
<li>但如果LP坚信当前的价格不是正确（合理）的：they may arbitrage it to the level they desire, and add liquidity at that price.</li>
</ul>
</li>
<li>Pool tokens<ul>
<li>Whenever liquidity is deposited into a pool, unique tokens known as <em><strong>liquidity tokens</strong></em> are minted and sent to the provider’s address.  当LP投资的时候，liquidity tokens会被铸造并送到LP的地址中。</li>
<li>这种token表示一位特定LP对pool的贡献。LP获得token的数量决定于The proportion of the pool’s liquidity provided（？这位LP对池子流动性的贡献）</li>
<li>If the provider is minting a new pool, the number of liquidity tokens they will receive will <strong>equal sqrt(x * y),</strong> where x and y represent the amount of each token provided.  第一个投资者获得的liquidity token</li>
<li>任何时候交易发生时，会收取百分之0.3的小费，这部分小费在交易结束之后按比例分给这个池子里的LP</li>
<li>（没太理解）To retrieve the underlying liquidity, plus any fees accrued, liquidity providers must <strong>“burn” their liquidity tokens</strong>, effectively exchanging them for their portion of the liquidity pool, plus the proportional fee allocation. 大概意思应该是LP要拿到上一条说的小费，应该燃烧liquidity tokens（相当于把自己在pool里的股份变现为自己应该分成到的交易小费）</li>
<li>liquidity tokens也可以销售，转让，…（像商品&#x2F;货币一样）</li>
</ul>
</li>
<li>Why pools？<ul>
<li>自动做市（核心概念）<strong>Uniswap is unique in that it doesn’t use an order book to derive the price of an asset or to match buyers and sellers of tokens. Instead, Uniswap uses what are called Liquidity Pools.</strong> （这段话出现很多次）</li>
<li>order books的局限： </li>
<li>require <strong>intermediary infrastructure</strong> to host the orderbook and match orders.</li>
<li>require active <strong>participation and management from market makers</strong> who usually use sophisticated infrastructure and algorithms, limiting participation to advanced traders</li>
<li>在以太坊，应该运用相应的优势：A blockchain-native liquidity protocol should &#x2F;&#x2F;take advantage of &#x2F;&#x2F;the trusted code execution environment, the autonomous and perpetually running virtual machine, and an open, permissionless, and inclusive access model that produces an exponentially growing ecosystem of virtual assets.</li>
<li>It is important to reiterate that <strong>a Pool is just a smart contract, operated by users calling functions on it</strong>. （Pool只是一个智能合约，操作者做相应操作的时候会调用相应的函数）Swapping tokens is calling <code>swap</code> on a Pool contract instance, while providing liquidity is calling <code>deposit</code>.</li>
<li>end-users：与接口&#x2F;&#x2F; developers可以与底层的智能合约直接交互</li>
</ul>
</li>
</ul>
<h3 id="Flash-Swaps"><a href="#Flash-Swaps" class="headerlink" title="Flash Swaps"></a>Flash Swaps</h3><p>withdraw up to：提取</p>
<p>arbitrary：任意的</p>
<p>upfront：坦率的，诚实的；预付的，预交的</p>
<hr>
<ul>
<li>（开始看不懂了sos）Uniswap flash swaps allow you to withdraw up to the full reserves of any ERC20 token on Uniswap and execute arbitrary logic at no upfront cost, provided that by the end of the transaction you either<ul>
<li>pay for the withdrawn ERC20 tokens with the corresponding pair tokens</li>
<li>return the withdrawn ERC20 tokens along with a small fee</li>
</ul>
</li>
<li>好处：Flash swaps are incredibly useful because they <strong>obviate upfront capital requirements and unnecessary order-of-operations constraints</strong> for multi-step transactions involving Uniswap.</li>
<li>……（暂时不看了，看起来比较深入的样子）</li>
</ul>
<h3 id="Oracles"><a href="#Oracles" class="headerlink" title="Oracles"></a>Oracles</h3><p>stock price：股票价格；股票行市；交易所卖价</p>
<p>retrieve：检索</p>
<p>aggregated：聚合的</p>
<p>manipulation-resistant：抵制篡改</p>
<hr>
<ul>
<li>Introduction<ul>
<li>a price oracle： any tool used to view price information about a given asset.（给定资产，用来查询价格信息的任何工具</li>
<li>对于给定的链上的某资产，怎样能够最快最好地查询到相应的价格？</li>
<li>oracle  have been implemented on an ad-hoc basis 风险比较大</li>
</ul>
</li>
<li>Uniswap V2 solution …</li>
</ul>
<h2 id="Concepts：Advanced-Topics"><a href="#Concepts：Advanced-Topics" class="headerlink" title="Concepts：Advanced Topics"></a>Concepts：Advanced Topics</h2><h3 id="Fees"><a href="#Fees" class="headerlink" title="Fees"></a>Fees</h3><hr>
<ul>
<li>Liquidity provider fees<ul>
<li>百分之0.3（这个数字我记住了）<strong>This fee is split by liquidity providers proportional to their contribution to liquidity reserves.</strong>  简称分红x</li>
<li>This increases the value of liquidity tokens.  liquidity tokens增值了</li>
<li>Fees are collected by burning liquidity tokens to remove a proportional share of the underlying reserves. 需要销毁投资（份额）才能拿到小费（分红）</li>
<li>因为小费被增加到liquidity pools中，因此常量在每一笔交易之后增加了。单笔交易中，the invariant represents <code>token0_pool / token1_pool</code> at the end of the previous transaction 常量展示的是过去交易结束后的 <code>token0_pool / token1_pool</code></li>
</ul>
</li>
<li>Protocol Fees<ul>
<li>目前没有，未来可能要有百分之0.05</li>
</ul>
</li>
<li>Protocol Charge Calculation<ul>
<li>未来可能的协议费可能并不影响交易者小费，但可能影响liquidity providers的分红</li>
<li>Rather than calculating this charge on swaps, which would significantly increase gas costs for all users, the charge is instead calculated <strong>when liquidity is added or removed</strong>. （与其一笔一笔地算，不如在liquidity被添加或移除的时候算</li>
</ul>
</li>
</ul>
<h3 id="Pricing"><a href="#Pricing" class="headerlink" title="Pricing"></a>Pricing</h3><p>underpin：支持，巩固；构成…的基础</p>
<hr>
<ul>
<li>How are prices determined？<ul>
<li>The ratio of tokens in the pool, in combination with the constant product formula, ultimately determine the price that a swap executes at. 决定执行swap的价格的因素：池中token的比率，the constant product formula</li>
</ul>
</li>
<li>How Uniswap handles prices<ul>
<li>V1<ul>
<li>trades are always executed at the “<strong>best possible” price</strong>, calculated at execution time</li>
<li>Somewhat confusingly, this calculation is actually accomplished <strong>with one of two different formulas</strong>, depending on <strong>whether the trade specifies an exact <em>input</em> or <em>output</em> amount.</strong></li>
<li>一般这种差异不大，但也有极端情况，复杂情况</li>
</ul>
</li>
<li>V2<ul>
<li>Initial attempts to support both functions in V2 proved inelegant, and the decision was made to <strong>not provide any pricing functions in the core</strong>. 在核心合约中不提供任何pricing的功能</li>
<li>Instead, <strong>pairs</strong> directly check whether the <strong>invariant was satisfied</strong> (accounting for fees) <strong>after every trade.</strong></li>
<li>One downstream benefit is that V2 pairs will more naturally support other flavors of trades which may emerge (更能支持其他可能出现的种类的交易)</li>
<li>At a high level, in Uniswap V2, <em>trades must be priced in the periphery</em></li>
</ul>
</li>
</ul>
</li>
<li>Pricing Trades<ul>
<li>当我们在Uniswap做swap时，我们总是期望一下两种情况发生<ul>
<li>给定一定的输入，得到尽可能多的输出</li>
<li>明确要得到的输出，使得输入尽可能少</li>
</ul>
</li>
<li>However, it is <em>not safe to perform this lookup and rely on the results without access to an external price</em>. 但是仅仅看Uniswap内部的比率，而不顾Uniswap外市场的价格，是危险的</li>
<li>危险的原因：从我们查询得到比例，到最后交易落实（confirmed）有一个时间差，在这段时间中比率可能因为别人的操作（交易）而变化</li>
<li>To prevent these types of attacks, it’s vital to submit swaps <em>that have access to knowledge about the “fair” price their swap should execute at</em>.  In other words, swaps need access to an <em>oracle</em>, to be sure that the best execution they can get from Uniswap is close enough to what the oracle considers the “true” price.  就是swap需要能够查询市场价格，保证交易的时候价格是合理的</li>
</ul>
</li>
</ul>
<h3 id="Understanding-Returns"><a href="#Understanding-Returns" class="headerlink" title="Understanding Returns"></a>Understanding Returns</h3><hr>
<ul>
<li>There is a risk of losing money during large and sustained movement in the underlying asset price compared to simply holding an asset.</li>
<li>Risks</li>
<li>Example from the article</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/02/04/uniswap%E5%AE%98%E7%BD%91%E9%98%85%E8%AF%BB%E5%AD%A6%E4%B9%A0/" data-id="cldsh9fbr0000jwus3ayc4nl2" data-title="uniswap官网阅读学习" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-230202会议记录" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/02/02/230202%E4%BC%9A%E8%AE%AE%E8%AE%B0%E5%BD%95/" class="article-date">
  <time class="dt-published" datetime="2023-02-02T10:42:48.000Z" itemprop="datePublished">2023-02-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/02/02/230202%E4%BC%9A%E8%AE%AE%E8%AE%B0%E5%BD%95/">230202会议记录</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>迟到了十分钟呜呜，尽量听尽量听</p>
<p>覆盖率不太适用</p>
<p>1、不好收集，容易产生噪音，可能和很多进程交互</p>
<p>2、哪怕指示表明出现错误，也不能告诉人们怎么修正错误</p>
<p>Error Message Guided Fuzzing</p>
<p>两种错误</p>
<p>1、参数错误（类型正确，其他约束）（例如整型</p>
<p>2、issues with internal state（逻辑问题，例如还没创建对象，就企图操作对象</p>
<p><img src="/2023/02/02/230202%E4%BC%9A%E8%AE%AE%E8%AE%B0%E5%BD%95/1.png"></p>
<p><img src="/2023/02/02/230202%E4%BC%9A%E8%AE%AE%E8%AE%B0%E5%BD%95/2.png"></p>
<p>左边：参数错误，右边：逻辑错误</p>
<p>三千多条信息，比较麻烦</p>
<p>如果从软件分析的角度：可以运用反向污点传播，把报错信息和实际的参数关联出来</p>
<p>两个子问题：API和内部变量关联；内部变量和报错信息的关联</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/02/02/230202%E4%BC%9A%E8%AE%AE%E8%AE%B0%E5%BD%95/" data-id="cldpb3vg70000fsus4g7o7lyr" data-title="230202会议记录" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Uniswap-v2部署工作记录（一）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/01/30/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/" class="article-date">
  <time class="dt-published" datetime="2023-01-30T06:36:59.000Z" itemprop="datePublished">2023-01-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/01/30/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/">Uniswap-v2部署工作记录（一）</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>1.23-1.30</p>
<p>目前仍然是环境调试阶段呢，心累QAQ</p>
<hr>
<p>这几天工作总结：磕磕绊绊地找教程，无止尽地调环境，环境的bug怎么看不到头啊……</p>
<hr>
<h3 id="找教程历程"><a href="#找教程历程" class="headerlink" title="找教程历程"></a>找教程历程</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/212397361">https://zhuanlan.zhihu.com/p/212397361</a> 手把手叫教你部署uniswap</p>
<p> 通过助记词生成新账户<br> b站视频：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1VV411o7Dt/">https://www.bilibili.com/video/BV1VV411o7Dt/</a><br> yarn无法使用<br> 解决：1、把nodejs下的global放入环境变量path中<br> 2、设置权限 <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_55333190/article/details/122492166">https://blog.csdn.net/weixin_55333190/article/details/122492166</a></p>
<p> 跟着视频 新建文件夹D:\实验室\myblockchain</p>
<p> 开始看教程！（flag：把这个教程跟完）（除非不可抗因素：卡着了）<br> <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1ph411e7bT">https://www.bilibili.com/video/BV1ph411e7bT</a><br> 记住这个网址：cn.etherscan.com-试图打开-失败了xs</p>
<p> 上面的教程用remix，和学长交流后决定不用remix，而改用truffle。又要重新开始找教程了呜呜</p>
<hr>
<p> 1.28晚：折腾一晚上没在b站找到用truffle搭建的，在博客园找到了一个，不过人家似乎经历了一些自己的整合，但是源码已经找不到了（sigh）同时以太坊网站和其他外网都上不去，梯子时不时提示什么config error</p>
<p> 1.29：继续找教程，找到了hardrat（？）和foundry的，就是没找到truffle的视频教程；解决了翻墙问题，最后的最后竟然是因为梯子没有升级到最新版本（一口老血喷了出来）</p>
<p> 决定先跟着这个教程：<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000040401731">https://segmentfault.com/a/1190000040401731</a> 把truffle当成一个框架！</p>
<hr>
<h3 id="调试环境"><a href="#调试环境" class="headerlink" title="调试环境"></a>调试环境</h3><p> yarn编译第一步就出错了（令人窒息的满屏error</p>
<p> <img src="/2023/01/30/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/1.png"></p>
<p> 一个类似的但不是sha的：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34373197/article/details/122809786">https://blog.csdn.net/qq_34373197/article/details/122809786</a><br> 建议是node重装成比较低的版本（倒吸一口凉气）（planB，感觉不太好行动）</p>
<p> 另一个sha的，但还没看到解决方案，全是same的英文网站：<a target="_blank" rel="noopener" href="https://github.com/phusion/node-sha3/issues/32">https://github.com/phusion/node-sha3/issues/32</a></p>
<p> <strong>我先干一件事情：把梯子关掉重试一下。感觉哪怕没有用也得保持梯子关掉（至少编译配环境过程中），不然问题有点多</strong><br> error依旧！那没事了</p>
<p><img src="/2023/01/30/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/2.png"></p>
<p> 别人的错误信息：<br><img src="/2023/01/30/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/3.png"></p>
<p> 我的对应信息：</p>
<p><img src="/2023/01/30/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/4.png"><br> 那可能就不是node的版本问题了<br> 查一下vs</p>
<hr>
<h4 id="和VS杠上了"><a href="#和VS杠上了" class="headerlink" title="和VS杠上了"></a>和VS杠上了</h4><p> 有个解决方法是安装Vs。</p>
<p> 另一个办法是装拓展。<br> <strong>先试一下装拓展：</strong></p>
<p> <img src="/2023/01/30/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/5.png"><br> 卡住了（</p>
<p> 经过了一番兵荒马乱居然装上了，但怀疑有隐患。</p>
<p><img src="/2023/01/30/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/6.png"></p>
<p> <strong><strong>血的教训：1、文件名最好用英文</strong><br> 2、因为装拓展而多出来的文件夹不要删除，否则会有这样的灵异现象：</strong></p>
<p><img src="/2023/01/30/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/7.png"><br> 事实是C:\Program Files (x86)\Microsoft Visual Studio这个文件夹我动手把它删了。。。看到它还找到了不禁有点毛骨悚然</p>
<p> 最终解决问题参考的网页：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_48391379/article/details/117187522">https://blog.csdn.net/weixin_48391379/article/details/117187522</a><br> install卡住后如果crl+c退出后，最好remove一下，不然感觉不太干净的样子。</p>
<p> yarn的编译还是老问题：</p>
<p> <img src="/2023/01/30/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/8.png"></p>
<p> 借鉴：<a target="_blank" rel="noopener" href="https://blog.csdn.net/lc315yuhuofei/article/details/106015745">https://blog.csdn.net/lc315yuhuofei/article/details/106015745</a> 的更新gyp<br> 结果：没解决</p>
<p> 想试一下这个指令：<br> npm install –global –production windows-build-tools –vs2017<br> 结果：没能解决</p>
<p> 尝试用cnpm i -g windows-build-tools<br>       卡在python2.7…后<br>       解决借鉴：<a target="_blank" rel="noopener" href="https://blog.csdn.net/oqzuser1234asd/article/details/116169889">https://blog.csdn.net/oqzuser1234asd/article/details/116169889</a> 在temp文件添加文件以及指令</p>
<p> 但是yarn的这个错误还是没解决。。。<br> <strong>gyp ERR! UNCAUGHT EXCEPTION</strong><br> <strong>gyp ERR! stack Error: spawn C:\Program Files (x86)\Microsoft Visual Studio\2017\BuildTools\MSBuild\15.0\Bin\MSBuild.exe ENOENT</strong></p>
<p> 尝试用cnpm i -g windows-build-tools</p>
<p>虽然没有卡住</p>
<p>但是有新bug：Could not install Visual Studio Build Tools</p>
<p> <strong>决定下载vs了</strong><br> 在官网下载了2017版本的，并且对“桌面开发工具”打了勾安装<br> 但还是没有vs build tool</p>
<p> 正在找vs build tool 目前参考链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/Zhou_Yulong/article/details/117264550">https://blog.csdn.net/Zhou_Yulong/article/details/117264550</a><br> 其中下载vsbuildtoolfull.exe的，提示一个安装包损坏<br> 试着离线安装一下 百度yp能不能414啊这个限速</p>
<hr>
<p> 百度云盘真的够6</p>
<p>我重新搭建了这个博客框架（之前在旧电脑没搭起来）</p>
<p>吃了个午饭洗了碗</p>
<p>还把研究了hexo文章怎么发布，文章怎么添加图片</p>
<p>它一个1G的压缩包还没下载完</p>
<p>我真的谢谢你（想刀人的眼神藏不住了</p>
<p>hexo搭建教程： <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_54796785/article/details/126053172">https://blog.csdn.net/qq_54796785/article/details/126053172</a></p>
<p>hexo发布文章教程：<a target="_blank" rel="noopener" href="https://blog.csdn.net/PaperJack/article/details/120479912">https://blog.csdn.net/PaperJack/article/details/120479912</a></p>
<p>hexo文章添加图片教程：<a target="_blank" rel="noopener" href="https://blog.csdn.net/soul7y/article/details/106753778">https://blog.csdn.net/soul7y/article/details/106753778</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/01/30/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/" data-id="cldifmih80000x8ushl9p6k1a" data-title="Uniswap-v2部署工作记录（一）" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/01/30/hello-world/" class="article-date">
  <time class="dt-published" datetime="2023-01-30T05:40:03.071Z" itemprop="datePublished">2023-01-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/01/30/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/01/30/hello-world/" data-id="cldidtpgp0000k0useig5aqp0" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/02/06/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%BA%8C%EF%BC%89/">Uniswap-v2部署工作记录（二）</a>
          </li>
        
          <li>
            <a href="/2023/02/04/uniswap%E5%AE%98%E7%BD%91%E9%98%85%E8%AF%BB%E5%AD%A6%E4%B9%A0/">uniswap官网阅读学习</a>
          </li>
        
          <li>
            <a href="/2023/02/02/230202%E4%BC%9A%E8%AE%AE%E8%AE%B0%E5%BD%95/">230202会议记录</a>
          </li>
        
          <li>
            <a href="/2023/01/30/Uniswap-v2%E9%83%A8%E7%BD%B2%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/">Uniswap-v2部署工作记录（一）</a>
          </li>
        
          <li>
            <a href="/2023/01/30/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>